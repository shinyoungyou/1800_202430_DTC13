<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Study Buddy</title>
    <!-------------------------------------------------------->
    <!-- Firebase 8 Library related CSS, JS, JQuery go here -->
    <!-------------------------------------------------------->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/ui/4.8.1/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.8.1/firebase-ui-auth.css" />
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>

    <!-- Other libraries go here -->
    <!-- Link to styles of your own -->
    <link rel="stylesheet" href="./styles/style.css" />

    <style>
        .home-navbar>a:not(:first-child):not(:last-child)>* {
            color: #212121;
        }

        .home-navbar>a:first-child>* {
            color: #7b7b7b;
        }

        .my-groups-navbar i {
            padding-bottom: 0.5rem;
            padding-left: 0.1rem;
        }
    </style>
</head>

<body class="relative bg-[#f2f2f7]">
    <div class="relative h-screen cover-container">
        <nav class="text-left pl-5 pt-12">
            <a href="mygroups.html">
                <i class="text-xl bi bi-chevron-left"></i>
            </a>
        </nav>
        <h4 class="text-center pb-5">New Groups</h4>
        <main class="pb-32">
            <div id="groups-go-here" class="p-5 pt-0 space-y-2">

            </div>


            <template id="newGroupListTemplate">
                <div class="rounded-lg card p-6 bg-white hover:bg-[#d7d7d7]" onclick="showGroupModal(event, 'Group A')">
                    <h2 id="groupName" class="text-[#222]">Group A</h2>
                    <p id="groupNumberOfMembersAndCreatedBy" class="text-xs text-[#666]">
                        Lorem ipsum dolor sit amet, consectetur adipisicing
                        elit. Et sapiente id numquam exercitationem
                        quibusdam iste beatae, consequatur nihil
                        repellendus, labore veritatis tempore. Earum eos
                        distinctio culpa ut expedita sunt molestiae!
                    </p>
                </div>
            </template>
             <div class="fixed bottom-32 right-5">
                    <div id="groups-go-here" class="mygroups-main grid grid-cols-1 divide-y" ></div>
                    <a href="createGroup.html" class="fixed bottom-32 right-5">
                    <button class="p-3 rounded-full bg-white shadow-xl">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            x-bind:width="size"
                            x-bind:height="size"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            x-bind:stroke-width="stroke"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            width="24"
                            height="24"
                            stroke-width="2"
                        >
                            <path d="M12 5l0 14"></path>
                            <path d="M5 12l14 0"></path>
                        </svg>
                    </button>
                <div id="groups-go-here" class="p-5 pt-0 space-y-2">
        </main>

        <div class="absolute z-30 top-1/3 left-1/2 -translate-x-1/2 translate-y-1/2" id="groupModal" style="display: none;">
            <div class="z-0 bg-zinc-200 rounded-lg p-6 pt-8" style="height: 160px; width: 360px;">
                <h2 class="text-[#222]" id="modalGroupName">Group Name</h2>
                <div class="space-x-5 flex justify-end py-12">
                    <!-- <a src="#" class="text-sm">Join</a>
                                <a src="#" class="text-sm">Cancel</a> -->
                    <a>
                        <p id="joinGroup" onclick="joinNewGroup()">Join</p>
                    </a>
                    <a>
                        <p id="cancelJoin" onclick="cancelJoiningNewGroup()">Cancel</p>
                    </a>
                </div>
            </div>
        </div>
        
        <!-- <div class="absolute top-0 left-0 z-20 w-full h-full bg-black bg-opacity-30"></div> -->
        <footer>
            <nav id="navbarPlaceholder"></nav>
        </footer>
        
        <script>
            function showGroupModal(event, groupName) {
                var groupContainer = event.target.closest('.card');

                if (groupContainer) {
                    document.getElementById('modalGroupName').innerText = groupName;
                    document.getElementById('groupModal').style.display = 'block';
                }
            }
            function cancelJoiningNewGroup() {
                document.getElementById('groupModal').style.display = 'none';
            }
            function joinNewGroup() {
                //document.getElementById('groupModal').style.display = 'none';
                // alert('You have joined successfully!');
                // groupsRef.where('name', '==', currentGroup.name)
                //     .get()
                //     .then(querySnapShot => {
                //         querySnapShot.forEach(doc => {
                //             groupsRef.doc(doc.id).update({
                //                 is_my_group: true
                //             })
                //                 .then(() => {
                //                     console.log(`Joined ${currentGroup.name}`);
                //                 })
                //                 .catch(error => {
                //                     console.error(error);
                //                 });
                //         });
                //     })
                var groupName = document.getElementById('modalGroupName').innerText;
                console.log('Joining group ' + groupName);
                document.getElementById('groupModal').style.display = 'none';
            }

            document.addEventListener('DOMContentLoaded', function(){
                const groupContainer = document.getElementById('groups-go-here');
                const groupTemplate = document.getElementById('newGroupListTemplate');

                const groups = [
                    { name: 'Group A', description: 'Description for Group A' },
                    { name: 'Group B', description: 'Description for Group B' },
                    { name: 'Group C', description: 'Description for Group C' }
                ];

                groups.forEach(group => {
                    const newGroup = groupTemplate.content.cloneNode(true);
                    newGroup.querySelector('.group-name').innerText = group.name;
                    newGroup.querySelector('.group-description').innerText = group.description;
                    groupsContainer.appendChild(newGroup);
                });
            })
        </script>
        </div>
    <!---------------------------------------------->
    <!-- Your own JavaScript functions go here    -->
    <!---------------------------------------------->
    <script src="./scripts/firebaseAPI_DTC13.js"></script>
    <script src="./scripts/skeleton.js"></script>
    <script src="./scripts/groups.js"></script>
    <!-- Link to scripts of your own -->
    <!-- <script src="./scripts/script.js"></script> -->
</body>

</html>